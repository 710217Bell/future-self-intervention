<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Meet Your Future Self</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600&family=Crimson+Text:ital@0;1&display=swap');

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #eeeeee, #f4e6ef);
  color: #4b3b4f;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 1.5rem;
}

.card {
  background: rgba(255,255,255,0.95);
  border-radius: 20px;
  padding: 1.8rem;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  animation: fadeUp 0.6s ease;
}

h2 {
  font-family: 'Playfair Display', serif;
  color: #6a4c93;
  margin-bottom: 0.2rem;
  font-size: 2rem;
}

.subtitle {
  font-family: 'Crimson Text', serif;
  font-style: italic;
  color: #8d6fa3;
  margin-bottom: 1rem;
}

textarea {
  width: 100%;
  min-height: 120px;
  border-radius: 12px;
  border: 2px solid #e4d7ec;
  padding: 0.8rem;
  font-size: 1rem;
  box-sizing: border-box;
}

textarea:focus {
  outline: none;
  border-color: #9f86c0;
}

button {
  background: #d8b4e2;
  border: none;
  border-radius: 20px;
  padding: 0.7rem 1.6rem;
  font-size: 1rem;
  margin: 0.5rem;
  cursor: pointer;
}

button:hover {
  background: #c79ad9;
}

.progress-track {
  background: #e4d7ec;
  height: 10px;
  border-radius: 20px;
  margin-bottom: 1rem;
}

.progress-fill {
  background: linear-gradient(90deg, #c79ad9, #9f86c0);
  height: 100%;
  width: 0%;
  border-radius: 20px;
  transition: width 0.4s ease;
}

.info-box {
  background: #f7effb;
  border-left: 4px solid #b392c7;
  padding: 0.8rem;
  border-radius: 10px;
  margin: 1rem 0;
}

.inspiration-image {
  width: 100%;
  height: 280px;
  object-fit: cover;
  border-radius: 16px;
  margin: 1.5rem 0;
}

.mindmap {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.center-node {
  grid-column: span 2;
  background: linear-gradient(135deg, #f2e9f7, #e8d8f0);
  padding: 1.2rem;
  border-radius: 14px;
  text-align: center;
  font-weight: bold;
}

.node {
  background: white;
  padding: 1rem;
  border-radius: 12px;
  border-left: 4px solid #d8b4e2;
}

.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
}

.modal-content {
  background: white;
  margin: 10% auto;
  padding: 2rem;
  border-radius: 20px;
  max-width: 500px;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<div class="container">
  <div class="progress-track">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <div class="card">
    <h2 id="stageTitle"></h2>
    <div class="subtitle" id="stageSubtitle"></div>
    <div id="stageContent"></div>
    <div id="buttons"></div>
  </div>
</div>

<div id="emailModal" class="modal">
  <div class="modal-content">
    <h3>Email Your Journey</h3>
    <input type="email" id="emailInput" placeholder="you@example.com" />
    <button onclick="sendEmail()">Send</button>
    <button onclick="closeEmailModal()">Cancel</button>
  </div>
</div>

<script>
let currentStage = 0;

let responses = JSON.parse(localStorage.getItem("futureSelfLO")) || {
  timeframe: 3,
  visualization: "",
  strengths: "",
  obstacles: "",
  letterToFuture: "",
  letterFromFuture: ""
};

const stages = [
{
  title: "Meet Your Future Self",
  subtitle: "Life Orientation | Self-awareness",
  render: () => `
    <img class="inspiration-image"
      src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1200&q=80"
      onerror="this.style.display='none'">
    <p>This activity helps you reflect on your future goals and choices.</p>
  `
},
{
  title: "Your Timeline",
  subtitle: "Goal-setting",
  render: () => `
    <input type="range" min="1" max="10" value="${responses.timeframe}"
      oninput="updateTimeframe(this.value)">
    <p><strong>${responses.timeframe} years ahead</strong></p>
  `
},
{
  title: "Future Vision",
  subtitle: "Self-concept",
  render: () => `
    <textarea oninput="save('visualization', this.value)"
      placeholder="Describe your future...">${responses.visualization}</textarea>
  `
},
{
  title: "Strengths",
  subtitle: "Personal resources",
  render: () => `
    <textarea oninput="save('strengths', this.value)"
      placeholder="What strengths helped you?">${responses.strengths}</textarea>
  `
},
{
  title: "Challenges",
  subtitle: "Resilience",
  render: () => `
    <textarea oninput="save('obstacles', this.value)"
      placeholder="What challenges did you overcome?">${responses.obstacles}</textarea>
  `
},
{
  title: "Letter to Future Self",
  subtitle: "Responsibility",
  render: () => `
    <textarea oninput="save('letterToFuture', this.value)"
      placeholder="Dear Future Me...">${responses.letterToFuture}</textarea>
  `
},
{
  title: "Reply from the Future",
  subtitle: "Reflection",
  render: () => `
    <textarea oninput="save('letterFromFuture', this.value)"
      placeholder="Dear Past Me...">${responses.letterFromFuture}</textarea>
  `
},
{
  title: "Your Future Map",
  subtitle: "Integration",
  render: () => `
    <div class="mindmap">
      <div class="center-node">Future Me</div>
      <div class="node"><strong>Vision</strong><br>${responses.visualization}</div>
      <div class="node"><strong>Strengths</strong><br>${responses.strengths}</div>
      <div class="node"><strong>Growth</strong><br>${responses.obstacles}</div>
      <div class="node"><strong>Guidance</strong><br>${responses.letterFromFuture}</div>
    </div>

    <button onclick="downloadJourney()">Download</button>
    <button onclick="openEmailModal()">Email</button>
  `
}
];

function render() {
  const stage = stages[currentStage];
  document.getElementById("stageTitle").innerText = stage.title;
  document.getElementById("stageSubtitle").innerText = stage.subtitle;
  document.getElementById("stageContent").innerHTML = stage.render();
  document.getElementById("progressFill").style.width =
    ((currentStage + 1) / stages.length) * 100 + "%";
  renderButtons();
}

function renderButtons() {
  let html = "";
  if (currentStage > 0) html += `<button onclick="prev()">Back</button>`;
  if (currentStage < stages.length - 1) html += `<button onclick="next()">Continue</button>`;
  document.getElementById("buttons").innerHTML = html;
}

function next() { currentStage++; render(); }
function prev() { currentStage--; render(); }

function save(key, value) {
  responses[key] = value;
  localStorage.setItem("futureSelfLO", JSON.stringify(responses));
}

function updateTimeframe(v) { save("timeframe", v); render(); }

function downloadJourney() {
  const text = JSON.stringify(responses, null, 2);
  const blob = new Blob([text], {type:"text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "Future_Self_Journey.txt";
  a.click();
}

function openEmailModal() {
  document.getElementById("emailModal").style.display = "block";
}
function closeEmailModal() {
  document.getElementById("emailModal").style.display = "none";
}
function sendEmail() {
  const email = document.getElementById("emailInput").value;
  if (!email.includes("@")) { alert("Enter valid email"); return; }
  window.location.href = `mailto:${email}?subject=My Future Self Journey`;
  closeEmailModal();
}

render();
</script>

</body>
</html>
